<!DOCTYPE html>
<meta charset="UTF-8">
<html lang="en">

<head>
  <title>Proof of Liability</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
  <link href="index.css" rel="stylesheet">

  <style>

  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col"></div>

      <div class="col-11">
        <div class="row"></div>
        <h1 class="display-3">Proof of Liability <small class="text-muted">- Distributed Auditing</small></h1>
      </div>
      <div class="row">
        <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
          <button class="nav-link active" id="nav-desc-tab" data-bs-toggle="tab" data-bs-target="#nav-desc"
            type="button" role="tab" aria-controls="nav-desc" aria-selected="true">Description</button>
          <button class="nav-link" id="nav-data-tab" data-bs-toggle="tab" data-bs-target="#nav-data" type="button"
            role="tab" aria-controls="nav-data" aria-selected="true">Load Data</button>
          <button class="nav-link" id="nav-tree-tab" data-bs-toggle="tab" data-bs-target="#nav-tree" type="button"
            role="tab" aria-controls="nav-tree" aria-selected="false">Build Tree</button>
          <button class="nav-link" id="nav-verify-tab" data-bs-toggle="tab" data-bs-target="#nav-verify" type="button"
            role="tab" aria-controls="nav-verify" aria-selected="false">Verify Audit</button>
        </div>
      </div>
      <div class="row">
        <div class="card">
          <div class="card-body">
            <div class="tab-content" id="nav-tabContent">
              <div class="tab-pane fade show active" id="nav-desc" role="tabpanel" aria-labelledby="nav-desc-tab">
                <div class="row">
                  <h1 class="display-6 offset-md-1">Introduction</h1>
                </div>

                <div class="row">
                  <div class="col-md-9 offset-md-1">
                    <p>Proof of Liabilities (PoL) is a scheme designed to let companies that accept monetary deposits
                      from
                      consumers (e.g. Bitcoin exchanges, gambling websites, online Bitcoin wallets, etc.) prove their
                      total amount of deposits (their liabilities) without compromising the privacy of individual users.
                    </p>
                  </div>
                </div>


                <div class="row">
                  <h1 class="display-6 offset-md-1">How Does It Work?</h1>
                </div>

                <div class="row">
                  <div class="col-md-9 offset-md-1">
                    <ol>
                      <!-- <li class="mt-2"><strong>Build users data set</strong> - for each user we'll compute his
                        commitment as follow \(sha256(Id_{user} | balance_{user}) = commitment_{user}\).</li> -->

                      <li class="mt-2"><strong>Constructing the User Data Set:</strong> For each user, we calculate a unique commitment using the formula \(sha256(Id_{user} | balance_{user}) = commitment_{user}\).</li>

                      <!-- <li class="mt-2"><strong>Build a liability tree</strong> - based on the users' data set we'll
                        build a summation merkle tree.</li> -->
                      <li class="mt-2"><strong>Building the Liability Tree:</strong> Utilizing the user data set, we construct a summation Merkle tree.</li>
                      <!-- <li class="mt-2"><strong>The total liability</strong> - will be at the root of the tree. All leafs
                        will be sums up to the root. </li> -->

                      <li class="mt-2"><strong>Determining Total Liability:</strong> The root of the tree represents the total liability, which is the sum of all leaf nodes.</li>

                      <!-- <li class="mt-2"><strong>Each user can verify</strong> that his liability were taken into account
                        by verify the path from his commitment at the leaf to the published root by the Provider.</li> -->

                        <li class="mt-2"><strong>User Verification:</strong> Each user can confirm that their liability has been accounted for by verifying the path from their commitment at the leaf node to the published root provided by the organization.</li>

                    </ol>
                  </div>
                </div>

              </div>
              <div class="tab-pane fade" id="nav-data" role="tabpanel" aria-labelledby="nav-data-tab">
                <div class="row">
                  <h1 class="display-6 offset-md-1">Users table <small class="text-muted">(internal DB)</small> </h1>
                </div>
                <div class="row">

                  <div id="maintable-table" class="table-editable">
                    <table id='users_table'
                      class="table text-nowrap table-bordered table-sm table-responsive-md table-striped text-center">
                      <thead>
                        <tr>
                          <th class="text-center">User Id</th>
                          <th class="text-center">Balance</th>
                          <th class="text-center">Commitment</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td class="pt-3-half user-id" contenteditable="true">alice@aol.com</td>
                          <td class="pt-3-half user-amount" contenteditable="true">30</td>
                          <td class="pt-3-half user-commitment">
                            f604ac9dd5566a447c0cddc8cd655e08080b3248d39243eddfc864f49b0bb280</td>
                          <td>
                            <span class="table-remove"><button type="button"
                                class="btn btn-danger btn-rounded btn-sm my-0">
                                Remove
                              </button></span>
                          </td>
                        </tr>
                        <tr>
                          <td class="pt-3-half user-id" contenteditable="true">bob@hotmail.com</td>
                          <td class="pt-3-half user-amount" contenteditable="true">45</td>
                          <td class="pt-3-half user-commitment">
                            ba4a44eb2d003799fa07a824f2004f195a4f6ea01dc2b20d130787c2a41ac926</td>
                          <td>
                            <span class="table-remove"><button type="button"
                                class="btn btn-danger btn-rounded btn-sm my-0">
                                Remove
                              </button></span>
                          </td>
                        </tr>
                        <tr>
                          <td class="pt-3-half user-id" contenteditable="true">ron@netscape.net</td>
                          <td class="pt-3-half user-amount" contenteditable="true">3</td>
                          <td class="pt-3-half user-commitment">
                            a9264a3e5070c50b06c674f84a691c8ca1b1ae0be77bcc06c79551912a1c09da</td>
                          <td>
                            <span class="table-remove"><button type="button"
                                class="btn btn-danger btn-rounded btn-sm my-0">
                                Remove
                              </button></span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="row">
                      <div class="col-11"></div>
                      <div class="col-1"><button type="button" class="btn bottom-0 end-0 btn-primary"
                          id="btn-add-user">Add</button></div>
                    </div>
                  </div>


                </div>
                <div class="row">
                  <div id="users-table"></div>
                </div>
              </div>
              <div class="tab-pane fade" id="nav-tree" role="tabpanel" aria-labelledby="nav-tree-tab">
                <graph id='merkle-graph'></graph>
              </div>
              <div class="tab-pane fade" id="nav-verify" role="tabpanel" aria-labelledby="nav-verify-tab">

                <div class="row justify-content-center">
                  <h1 class="display-5 text-center">Verification Process</h1>
                </div>

                <div class="row ">
                  <h4 class="display-6 offset-md-1"><u>Prover's Responsibilities</u></h4>
                </div>

                <div class="row offset-md-1">
                  <h5 class="display-7">The Prover Must Publish Three Key Elements  <i class="bi bi-broadcast-pin"></i></h5>
                </div>

                <div class="row offset-sm-1" style="padding-left: 30px;">
                  <ul>
                    <li>The Merkle tree root (commitment + total liability)</li>
                    <li>A Zero-Knowledge Proof (ZKP) confirming the tree's correctness</li>
                    <li>The authentication path for each user</li>
                  </ul>
                </div>

                <div class="row offset-md-1">
                  <p>In our case the root node value is <kbd
                      id="published-root-text">0eacb4896fa4a123c71dc111b96ff6d00ad654e5943075a250ec11ec50d40aac</kbd><br>
                      The proof is denoted as <kbd>&#960</kbd></p>
                </div>

                <div class="row">
                  <div class="col-md-5 offset-md-1">
                    <h4 class="display-6"><u>Verifier's Responsibilities</u></h4>
                  </div>

                  <div class="col-md-2 offset-md-1 d-flex align-items-center">
                    <select id='user-verify-select' class="form-select" ></select>
                  </div>

                </div>

                <div class="row offset-md-1">
                  <h5 class="display-7">Calculate Personal Commitment<i class="bi bi-pen"></i></h5>
                </div>

                <div class="row offset-md-1 mt-3" id="verify-commitment-compution">


                </div>

                <div class="row offset-md-1 mt-5">
                  <h5 class="display-7">Verify the Path to the Root Node<i class="bi bi-search"></i>
                  </h5>
                </div>
                <div class="row offset-md-1">
                  <p>The prover supplies each user with an authentication path from their commitment to the root of the liability tree. This serves as proof that the verifier's liability is included in the total sum.</p>
                </div>

                <div class="row offset-md-1">
                  <graph-b id='merkle-graph-verifer'></graph-b>
                </div>


              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col"></div>
  </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js"
    integrity="sha512-szJ5FSo9hEmXXe7b5AUVtn/WnL8a5VofnFeYC2i2z03uS2LhAch7ewNLbl5flsEmTTimMN0enBZg/3sQ+YOSzQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="start.js"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</body>

</html>